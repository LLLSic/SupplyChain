(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["receipts"],{2085:function(e,t,a){},"426d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 账单\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"el-icon-refresh",on:{click:e.getData}}),"Company"==e.usertype?a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.handleAddRec}},[e._v("新增")]):e._e()],1),a("el-table",{staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"recIndex",label:"Id",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"coreCompanyAdd",label:"核心企业公钥",align:"center"}}),a("el-table-column",{attrs:{prop:"lenderAddress",label:"发起者公钥",align:"center"}}),a("el-table-column",{attrs:{prop:"bankAddress",label:"银行公钥",align:"center"}}),a("el-table-column",{attrs:{prop:"amount",label:"账款",align:"center"}}),a("el-table-column",{attrs:{prop:"sTime",label:"发起时间",align:"center"}}),a("el-table-column",{attrs:{prop:"eTime",label:"应还款时间",align:"center"}}),a("el-table-column",{attrs:{label:"核心企业已审理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.signed?"success":"danger"}},[e._v(e._s(t.row.signed))])]}}])}),a("el-table-column",{attrs:{label:"核心企业确认",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.confirmed?"success":"danger"}},[e._v(e._s(t.row.confirmed))])]}}])}),a("el-table-column",{attrs:{label:"银行已审理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.checkByBank?"success":"danger"}},[e._v(e._s(t.row.checkByBank))])]}}])}),a("el-table-column",{attrs:{label:"银行受理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.accepted?"success":"danger"}},[e._v(e._s(t.row.accepted))])]}}])}),a("el-table-column",{attrs:{label:"已还款",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.settled?"success":"danger"}},[e._v(e._s(t.row.settled))])]}}])}),"Company"!=e.usertype?a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["CoreCompany"==e.usertype&&!t.row.signed||"Bank"==e.usertype&&t.row.confirmed&&!t.row.checkByBank?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleAccept(t.$index,t.row)}}},[e._v("确认")]):e._e(),"CoreCompany"==e.usertype&&!t.row.signed||"Bank"==e.usertype&&t.row.confirmed&&!t.row.checkByBank?a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleRefuse(t.$index,t.row)}}},[e._v("拒绝")]):e._e(),"Bank"==e.usertype&&t.row.accepted?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleSettle(t.$index,t.row)}}},[e._v("确认还款")]):e._e()]}}],null,!1,3346795688)}):e._e()],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total,pager","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal}})],1)],1)])},c=[],s=(a("a481"),{name:"basetable",data:function(){return{usertype:localStorage.getItem("usertype"),query:{address:"",name:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("/normal/myOwnRec").then((function(t){console.log(t.data);for(var a=0;a<t.data.length;a++)t.data[a].sTime=new Date(parseInt(t.data[a].sTimeStamp)).toLocaleString().replace(/:\d{1,2}$/," "),t.data[a].eTime=new Date(parseInt(t.data[a].eTimeStamp)).toLocaleString().replace(/:\d{1,2}$/," ");e.tableData=t.data,e.pageTotal=e.tableData.length}),(function(e){console.log("数据获取失败")}))},handleRefuse:function(e,t){var a=this;this.$confirm("确定拒绝吗？","提示",{type:"warning"}).then((function(){"CoreCompany"==a.usertype?a.$http.patch("/cc/signRec",{index:t.recIndex,acceptOrNot:!1}).then((function(e){e.data&&e.data.success?a.$message.success("成功拒绝"):a.$message.error("拒绝失败，请稍后再试"),a.getData()})):a.$http.patch("/bank/acceptRec",{index:t.recIndex,acceptOrNot:!1}).then((function(e){e.data&&e.data.success?a.$message.success("成功接受"):a.$message.error("接受失败，请稍后再试"),a.getData()}))})).catch((function(e){console.log(e)}))},handleAccept:function(e,t){var a=this;this.$confirm("确定接受吗？","提示",{type:"warning"}).then((function(){"CoreCompany"==a.usertype?a.$http.patch("/cc/signRec",{index:t.recIndex,acceptOrNot:!0}).then((function(e){e.data&&e.data.success?a.$message.success("成功接受"):a.$message.error("接受失败，请稍后再试"),a.getData()})):a.$http.patch("/bank/acceptRec",{index:t.recIndex,acceptOrNot:!0}).then((function(e){e.data&&e.data.success?a.$message.success("成功接受"):a.$message.error("接受失败，请稍后再试"),a.getData()}))})).catch((function(e){console.log(e)}))},handleSettle:function(e,t){var a=this;this.$confirm("确定已还？","提示",{type:"warning"}).then((function(){a.$http.patch("/bank/settleRec",{index:t.recIndex}).then((function(e){e.data&&e.data.success?a.$message.success("处理成功"):a.$message.error("处理失败，请稍后再试"),a.getData()}))})).catch((function(e){console.log(e)}))},handleAddRec:function(){this.$router.push("/newReceipt")}}}),r=s,l=(a("d600"),a("2877")),o=Object(l["a"])(r,n,c,!1,null,"193a4d45",null);t["default"]=o.exports},d600:function(e,t,a){"use strict";var n=a("2085"),c=a.n(n);c.a}}]);